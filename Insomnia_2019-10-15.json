{"_type":"export","__export_format":4,"__export_date":"2019-10-14T18:32:17.276Z","__export_source":"insomnia.desktop.app:v7.0.1","resources":[{"_id":"req_9fb3cb4330764ec0b29338cc57faa354","authentication":{},"body":{},"created":1571060767360,"description":"","headers":[],"isPrivate":false,"metaSortKey":-1571060767360,"method":"GET","modified":1571075081155,"name":"QUERY FIRST","parameters":[],"parentId":"wrk_dd279434346648009d3a043dd9a627f7","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ webpage  }}","_type":"request"},{"_id":"wrk_dd279434346648009d3a043dd9a627f7","created":1570937990866,"description":"","modified":1570937990866,"name":"whitepanda","parentId":null,"_type":"workspace"},{"_id":"req_3c8228c3f8fc4793b8989157c3238fe1","authentication":{},"body":{"mimeType":"application/x-www-form-urlencoded","params":[{"id":"pair_216d23dfcf04451ea0e1417822e9c19c","name":"username","value":"ayush"},{"id":"pair_28af52fcfa7d42ccaddf2b8a10c2a3f1","name":"email","value":"ayush.zombiestar@gmail.com"},{"id":"pair_d3a319f5ec1f403b921c83d028029937","name":"password","value":"thisispwd"},{"id":"pair_e5f9d2fe70bd4846be72ebedd22042de","name":"isAdmin","value":"true"}]},"created":1570952601363,"description":"## Body required\n```\n@apiBody {String} username - required -- not unique\n@apiBody {String} email - required -- has to be unique within db\n@apiBody {String} password - required -- minimum 6 charecters\n@apiBody {Boolean} isAdmin - required -- is the user created admin -- default false\n```\n### Note: only admin users can create, update, delete cars\n\n## @Returns\n```\n200 - user created\n400 - User Already registered\n422 - missing params\n500 - server error\n```\n\n## @Successfull example\n```\nhttps 200 OK\n{\n  \"message\": \"User Created\",\n  \"user\": {\n    \"is_admin\": true,\n    \"_id\": \"5da329a712a3cd26075a54f3\",\n    \"username\": \"ayush\",\n    \"email\": \"ayush.zombiestar@gmail.com\",\n    \"password\": \"$2b$10$I.NK84CbgW31M9Uco2zL9uTLbq2jkYQlUU0xsDPtZLbuWQ65CYftG\",\n    \"__v\": 0\n  }\n}\n```\n\n## @Error Example\n```\nhttps 400\n{\n  \"message\": \"User already registered\"\n}\n```\n\n```\nhttps 422\n{\n  \"error\": \"\\\"username\\\" is required\"\n}\n```","headers":[{"id":"pair_a197999728ca4b48a14a94188d4393b5","name":"Content-Type","value":"application/x-www-form-urlencoded"}],"isPrivate":false,"metaSortKey":-1570952601363,"method":"POST","modified":1571073076702,"name":"register","parameters":[],"parentId":"fld_12e8e5768bb2458db5ace07138478337","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/register","_type":"request"},{"_id":"fld_12e8e5768bb2458db5ace07138478337","created":1570938116399,"description":"","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1571050882530,"modified":1571071215478,"name":"register / login","parentId":"wrk_dd279434346648009d3a043dd9a627f7","_type":"request_group"},{"_id":"req_5df38d2022724dd69828235f393d5c0c","authentication":{"disabled":false,"password":"","type":"basic","username":""},"body":{"mimeType":"application/x-www-form-urlencoded","params":[{"id":"pair_5ee5938969c34a2ebee51f454fd0e0da","name":"email","value":"ayush.zombiestar@gmail.com"},{"id":"pair_f8ca9d9a9fbb4e3fb88097f571f9b4d6","name":"password","value":"thisispwd"}]},"created":1570938143660,"description":"## body requires\n```\n@apiBody {String} email - required -- user email\n@apiBody {String} password - required -- user password\n```\n\n\n## @returns\n```\nstatus:\n200 -- jwt token\n401 -- unauthorized with message\n400 -- user not found\n```\n## @Success Examaple\nmessage: API mesg\ntoken: JWT token stored in cookie\n```\nhttps 200\n{\n  \"message\": \"Successfully logged in\",\n  \"token\": \"eyJhbGciOiJIUzI1NiJ9.NWRhMzI5YTcxMmEzY2QyNjA3NWE1NGYz.PjKAU1uWTYF5N3LiGNbnM43biKO7pPXQE-9rKUsK3QE\"\n}\n```\n\n## @Error Example\non password missmatch\nmessage: api message\n```\nhttps 401 password missmatch\n{\n  \"message\": \"password mismatch\"\n}\n```\n\non user not found\nmessage: api message\n```\nhttps 400 user not found\n{\n  \"message\": \"User doesn't exist\"\n}\n```\n","headers":[{"id":"pair_4a7cf441a5f74d68acb19b96b3939f0a","name":"Content-Type","value":"application/x-www-form-urlencoded"}],"isPrivate":false,"metaSortKey":-1570938143660,"method":"POST","modified":1571071536343,"name":"login","parameters":[{"id":"pair_826d0edd54ac444c89c7ff657a4f72ad","name":"","value":""}],"parentId":"fld_12e8e5768bb2458db5ace07138478337","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/login","_type":"request"},{"_id":"req_b03055378b7841e6b969bce9f8f36e49","authentication":{},"body":{"mimeType":"application/x-www-form-urlencoded","params":[{"id":"pair_48e0c72e07464253b82a1b82d18e7e87","name":"issueDate","value":"14-10-19"},{"id":"pair_507f6774e5a941cfa5bd778ab878c1d5","name":"returnDate","value":"17-10-19"},{"id":"pair_f7a866bebd52424f880ad8dfcb009b06","name":"vin","value":"1D7GL46X73S24675"}]},"created":1571041016243,"description":"## Body required\n```\n@apiBody {String} vin - required -- vehicle identification number -- unique\n@apiBody {String} issueDate - required -- booking start (DD-MM-YYYY)\n@apiBody {String} returnDate - required -- booking finish (DD-MM-YYYY)\n```\n\n## @Returns\n```\n200 - booking created\n422 - invalid issueDate or returnDate or issueDate after returnDate or booking starts in past\n404 - car not found for given VIN\n422 - Car already booked for given date\n500 - internal server error\n```\n\n## @Success Example\n```\nhttps 200\n{\n  \"message\": \"Booking Created\",\n  \"booking\": {\n    \"_id\": \"5da47e991ff1817955a5a4cb\",\n    \"car_id\": \"5da458d9403e495233c9ec6a\",\n    \"user_details\": \"5da329a712a3cd26075a54f3\",\n    \"issue_date\": \"2019-10-15T18:30:00.000Z\",\n    \"return_date\": \"2019-10-17T18:29:59.999Z\",\n    \"__v\": 0\n  }\n}\n```\n\n## @Error request\n```\nhttps 422\n{\n  \"message\": \"issueDate or returnDate invalid\"\n}\n```\n```\nhttps 422\n{\n  \"message\": \"Car already booked for given dates\"\n}\n```\n```\nhttps 404\n{\n  \"message\": \"Car not found for given VIN\"\n}\n```","headers":[{"id":"pair_bd1fbf3d9edf495799a6040ecfbdd51a","name":"Content-Type","value":"application/x-www-form-urlencoded"}],"isPrivate":false,"metaSortKey":-1571041016243,"method":"POST","modified":1571076436754,"name":"create booking","parameters":[],"parentId":"fld_31ca9ff8434e4c718cd25ddc5f57917f","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/create-booking","_type":"request"},{"_id":"fld_31ca9ff8434e4c718cd25ddc5f57917f","created":1571040997700,"description":"","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1571040997700,"modified":1571040997700,"name":"bookings","parentId":"wrk_dd279434346648009d3a043dd9a627f7","_type":"request_group"},{"_id":"req_94ffa1bc8c39423bb6d11d1a7e5a619a","authentication":{},"body":{},"created":1571038934309,"description":"## Body required\n```\n@apiParam {String} issueDate - required -- start date of search (DD-MM-YYYY)\n@apiParam {String} returnDate - required -- end date of search (DD-MM-YYYY)\n@apiParam {String} city - Optional -- city to search within\n```\n\n## @Returns\n```\n200 - ok success\n422 - issueDate or returnDate invalid or issueDate greater than returnDate\n500 - internal server error\n```\n\n## @Sucess Example\n```\nhttps 200 http://localhost:3000/api/search-cars?issueDate=11-10-19&returnDate=11-10-19\n{\n  \"cars\": [\n    {\n      \"bookings\": [\n        \"5da4595b5732835458c078ce\"\n      ],\n      \"_id\": \"5da458d9403e495233c9ec6a\",\n      \"vin\": \"1D7GL46X73S24675\",\n      \"city\": \"banglore\",\n      \"model\": \"wagonr\",\n      \"seat_capacity\": 4,\n      \"rent_per_day\": 960,\n      \"__v\": 1\n    },\n    {\n      \"bookings\": [\n        \"5da471ecf3c77a711fcfaa5a\"\n      ],\n      \"_id\": \"5da471e8f3c77a711fcfaa59\",\n      \"vin\": \"1D7GL46X73S24676\",\n      \"city\": \"banglore\",\n      \"model\": \"wagonr\",\n      \"seat_capacity\": 4,\n      \"rent_per_day\": 960,\n      \"__v\": 1\n    }\n  ]\n}\n```\n\n## @Error Example\n```\nhttps 422 http://localhost:3000/api/search-cars?issueDate=11-10-19\n{\n  \"message\": \"issueDate or returnDate invalid\"\n}\n```","headers":[],"isPrivate":false,"metaSortKey":-1571038934309,"method":"GET","modified":1571072763328,"name":"by time and city","parameters":[{"id":"pair_942151de6dda49a2a4807838b5baafdf","name":"issueDate","value":"11-10-19"},{"disabled":false,"id":"pair_86ab6a70e151491cb24bfddf8dfeab02","name":"returnDate","value":"11-10-19"}],"parentId":"fld_a2071b584aae4164a6416ba248e612db","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/search-cars","_type":"request"},{"_id":"fld_a2071b584aae4164a6416ba248e612db","created":1571038633552,"description":"","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1571038633552,"modified":1571038633552,"name":"search","parentId":"wrk_dd279434346648009d3a043dd9a627f7","_type":"request_group"},{"_id":"req_ba4a2b2735fd419996151731eb1fdb24","authentication":{},"body":{},"created":1571038644348,"description":"## Query required\n```\n@apiParam {String} model - required -- model of car searched\n```\n\n## @Returns\n```\n200 - Car with the given model\n400 - model not provided\n500 - internal server error\n```\n\n## @Sucess Result\n\nBookings[]: bookings for that car\n\nCars: Cars with the queried model\n```\nhttps 200 https://cars-rental-api.herokuapp.com/api/search-by-model?model=wagonr\n{\n  \"cars\": [\n    {\n      \"bookings\": [\n        {\n          \"_id\": \"5da4595b5732835458c078ce\",\n          \"car_id\": \"5da458d9403e495233c9ec6a\",\n          \"user_details\": \"5da329a712a3cd26075a54f3\",\n          \"issue_date\": \"2019-10-13T18:30:00.000Z\",\n          \"return_date\": \"2019-10-13T18:30:00.000Z\",\n          \"__v\": 0\n        }\n      ],\n      \"_id\": \"5da458d9403e495233c9ec6a\",\n      \"vin\": \"1D7GL46X73S24675\",\n      \"city\": \"banglore\",\n      \"model\": \"wagonr\",\n      \"seat_capacity\": 4,\n      \"rent_per_day\": 960,\n      \"__v\": 1\n    },\n    {\n      \"bookings\": [\n        {\n          \"_id\": \"5da459a620399e54c41b4d7e\",\n          \"car_id\": \"5da4590821992453ebe594c8\",\n          \"user_details\": \"5da329a712a3cd26075a54f3\",\n          \"issue_date\": \"2019-10-13T18:30:00.000Z\",\n          \"return_date\": \"2019-10-13T18:30:00.000Z\",\n          \"__v\": 0\n        }\n      ],\n      \"_id\": \"5da4590821992453ebe594c8\",\n      \"vin\": \"1D7GL46X73S24676\",\n      \"city\": \"banglore\",\n      \"model\": \"wagonr\",\n      \"seat_capacity\": 4,\n      \"rent_per_day\": 960,\n      \"__v\": 1\n    }\n  ]\n}\n```\n\n## @Error Example\n```\nhttps 400 Bad request\n{\n  \"message\": \"Model not provided\"\n}\n```","headers":[],"isPrivate":false,"metaSortKey":-1571038644348,"method":"GET","modified":1571077673825,"name":"by car model","parameters":[{"disabled":false,"id":"pair_b8e13903dbff4246a931bdae8d07dbea","name":"model","value":"wagonr"}],"parentId":"fld_a2071b584aae4164a6416ba248e612db","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/search-by-model","_type":"request"},{"_id":"req_322d27c72c644dbf855193d6e2e284da","authentication":{},"body":{},"created":1570972790363,"description":"## Query Required\n```\n@apiParam {String} vin - required -- deleted vehicle id\n```\n\n## @Returns\n```\n200 - delted, returns deleted data\n400 - VIN not found\n422 - Car has active bookings, cannot be deleted / no such car\n500 - internal server error\n```\n\n## @Succesful Example\n```\nhttps 200\n{\n  \"message\": \"Car removed\",\n  \"car\": {\n    \"bookings\": [],\n    \"_id\": \"5da47387f3c77a711fcfaa5d\",\n    \"vin\": \"1D7GL46X73S24677\",\n    \"city\": \"banglore\",\n    \"model\": \"wagonr\",\n    \"seat_capacity\": 4,\n    \"rent_per_day\": 960,\n    \"__v\": 0\n  },\n  \"bookings\": {\n    \"message\": \"deleted associated bookings with car\",\n    \"deleted\": {\n      \"n\": 0,\n      \"ok\": 1,\n      \"deletedCount\": 0\n    }\n  }\n}\n```\n## @Error example\n```\nhttps 422 unprocessable entry\n{\n  \"message\": \"The car cannot be deleted because of active bookings\"\n}\n```\n```\nhttps 400 bad request\n{\n  \"message\": \"vehicle identification number (VIN) required\"\n}\n```","headers":[],"isPrivate":false,"metaSortKey":-1570972790363,"method":"DELETE","modified":1571076533555,"name":"delete car","parameters":[{"disabled":false,"id":"pair_8ce30b9b392a4747b58e88585f8e04ea","name":"vin","value":"1D7GL46X73S24677"}],"parentId":"fld_1b1152edbf4146d5bd785eeba9fd4e8c","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/delete-car","_type":"request"},{"_id":"fld_1b1152edbf4146d5bd785eeba9fd4e8c","created":1570972715061,"description":"","environment":{},"environmentPropertyOrder":null,"metaSortKey":-1570972715061,"modified":1570972715061,"name":"Cars","parentId":"wrk_dd279434346648009d3a043dd9a627f7","_type":"request_group"},{"_id":"req_88db127051e94ba7bd1311e832fa43d3","authentication":{},"body":{"mimeType":"application/x-www-form-urlencoded","params":[{"disabled":false,"id":"pair_5e2543444a2e4e969ef9efc5cad5bcdd","name":"vin","value":"1D7GL46X73S24677"},{"id":"pair_eeb5b0c775c44636aba51924233b5983","name":"city","value":"delhi"},{"id":"pair_a249a95e49df4ee185d9288ac03f0742","name":"seatCapacity","value":"5"},{"id":"pair_d7646c7b97f540e0b2e1cb0d36b744b6","name":"model","value":"alto"},{"id":"pair_e137935e954c49c3b1721d813596b710","name":"rentPerDay","value":"400"}]},"created":1570972770557,"description":"## Body Required\n```\n@apiBody {String} vin - required -- update vehicle id\n@apiBody {String} city - optional -- updated city\n@apiBody {String} seatCapacity - opt - updated seat_capacity\n@apiBody {Number} rentPerDay - opt - updated rent per day\n@apiBody {String} model - opt --updated car model\n```\n\n## @Returns\n```\n200 - delted, returns deleted data\n400 - VIN not found\n422 - Car has active bookings, cannot be updated / no such car\n500 - internal server error\n```\n\n## @Sucess Example\n```\nhttps 200\n{\n  \"message\": \"Car updated\",\n  \"updated\": {\n    \"n\": 1,\n    \"nModified\": 1,\n    \"ok\": 1\n  }\n}\n```\n\n## @Error example\n```\nhttps 400\n{\n  \"message\": \"vehicle identification number (VIN) required\"\n}\n```","headers":[{"id":"pair_65c20e7f20d84be695650e4c399ff8e5","name":"Content-Type","value":"application/x-www-form-urlencoded"}],"isPrivate":false,"metaSortKey":-1570972770557,"method":"PUT","modified":1571076525501,"name":"update","parameters":[],"parentId":"fld_1b1152edbf4146d5bd785eeba9fd4e8c","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/update-car","_type":"request"},{"_id":"req_2f2a552e021e479a9db2c5bd03adf76d","authentication":{},"body":{"mimeType":"application/x-www-form-urlencoded","params":[{"id":"pair_cef1605d7c994cc3b150e835cd985372","name":"vin","value":"1D7GL46X73S24677"},{"id":"pair_dc7ec8565edf4ee9b01ba2f5fbdb576a","name":"city","value":"banglore"},{"id":"pair_e6f861d0ff864346b9c5a046b067416e","name":"model","value":"wagonR"},{"id":"pair_cb17f246dc7e4fe2a5e68b7da8de603d","name":"seatCapacity","value":"4"},{"id":"pair_6fe788a910cc499ea96f51732134e5ae","name":"rentPerDay","value":"960"}]},"created":1570972734437,"description":"## Body required\n```\n@apiBody {String} vin - required -- vehicle identification number -- unique\n@apiBody {String} city - required -- city of the car\n@apiBody {String} model - required -- model of car\n@apiBody {Number} seatCapacity - capacity of car\n@apiBody {Number} rentPerDay - rent of car for each day\n```\n\n# @Returns\n```\n200 - car added\n403 - user is not admin\n422 - missing parameters\n500 - internal server error\n```\n\n## @Success Example\nvin: vehicle identification number\n\ncity: city of car\n\nmodel: model of car\n\nseat_capacity: capacity of car\n\nrent_per_day: rent of car in rupees\n\nbookings: active booking of the car\n```\nhttps 200\n{\n  \"message\": \"Car has been added\",\n  \"car\": {\n    \"bookings\": [],\n    \"_id\": \"5da329d456e1522681fc3197\",\n    \"vin\": \"1D7GL46X73S324675\",\n    \"city\": \"banglore\",\n    \"model\": \"wagonr\",\n    \"seat_capacity\": 4,\n    \"rent_per_day\": 600,\n    \"__v\": 0\n  }\n}\n```\n\n## @Error example\n```\nhttps 422 Unprocessable entity\n{\n  \"error\": \"\\\"VIN\\\" is required\"\n}\n```\n```\nhttps 403 Forbidden\n{\n  \"message\": \"User is not admin\"\n}\n```","headers":[{"id":"pair_1d1723d75bc54843a268c1dafb82fc73","name":"Content-Type","value":"application/x-www-form-urlencoded"}],"isPrivate":false,"metaSortKey":-1570972752497,"method":"POST","modified":1571076519233,"name":"create","parameters":[],"parentId":"fld_1b1152edbf4146d5bd785eeba9fd4e8c","settingDisableRenderRequestBody":false,"settingEncodeUrl":true,"settingRebuildPath":true,"settingSendCookies":true,"settingStoreCookies":true,"url":"{{ base_url  }}/add-car","_type":"request"},{"_id":"env_efbab9aceb364bfba4fbb52ad8bdb50ab9f6c17c","color":null,"created":1570937990887,"data":{},"dataPropertyOrder":{},"isPrivate":false,"metaSortKey":1570937990887,"modified":1570938612981,"name":"Base Environment","parentId":"wrk_dd279434346648009d3a043dd9a627f7","_type":"environment"},{"_id":"jar_efbab9aceb364bfba4fbb52ad8bdb50ab9f6c17c","cookies":[{"creation":"2019-10-13T13:26:55.097Z","domain":"localhost","hostOnly":true,"httpOnly":true,"id":"268262180489373","key":"token","lastAccessed":"2019-10-13T13:42:04.648Z","path":"/","value":"eyJhbGciOiJIUzI1NiJ9.NWRhMzI5YTcxMmEzY2QyNjA3NWE1NGYz.PjKAU1uWTYF5N3LiGNbnM43biKO7pPXQE-9rKUsK3QE"},{"creation":"2019-10-14T18:05:55.273Z","domain":"cars-rental-api.herokuapp.com","hostOnly":true,"httpOnly":true,"id":"5150540937714119","key":"token","lastAccessed":"2019-10-14T18:09:25.087Z","path":"/","value":"eyJhbGciOiJIUzI1NiJ9.NWRhNGI4ZmM5NzU2NDAwMDI0ODY5Y2Qx.nvbMlhra2-37IbcfIxigmQcZV3VmQjGc-nV5oBXFpXg"}],"created":1570937990899,"modified":1571076565087,"name":"Default Jar","parentId":"wrk_dd279434346648009d3a043dd9a627f7","_type":"cookie_jar"},{"_id":"env_b0e5e69ca70942a59b95e47bbc7c853a","color":"#7d69cb","created":1570938571721,"data":{"base_url":"localhost:3000/api","webpage":"localhost:3000/"},"dataPropertyOrder":{"&":["base_url","webpage"]},"isPrivate":false,"metaSortKey":1570938571721,"modified":1571075073035,"name":"localhost","parentId":"env_efbab9aceb364bfba4fbb52ad8bdb50ab9f6c17c","_type":"environment"},{"_id":"env_765f8694c6b54ccdaa71a68f79945961","color":"#69cb6b","created":1571073159681,"data":{"base_url":"https://cars-rental-api.herokuapp.com/api","webpage":"https://cars-rental-api.herokuapp.com"},"dataPropertyOrder":{"&":["base_url","webpage"]},"isPrivate":false,"metaSortKey":1571073159681,"modified":1571076317712,"name":"heroku","parentId":"env_efbab9aceb364bfba4fbb52ad8bdb50ab9f6c17c","_type":"environment"}]}